<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Title - Blank File</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="/drafts/nopy2.html">

        <meta name="author" content="miyakogi" />
        <meta name="keywords" content="python" />
        <meta name="description" content="昨日「これからPython始めるプログラミング初心者はいいからPython3使っとけ」的なツイートをしたら思いの外伸びたので、Python2ではなくPython3をおすすめする理由を書いておきます。 この記事はこれからPythonを始めようとしている人、または始めたばかりの人を対象としています。 したがって、python2で書かれたコードをpython3で動くようにする方法とか、（この記事中で述べる）python2のクソ仕様の対処方法は書きません。 あくまで「Python始めたいけどバージョン二つあってどっち使えばいいかわかんない(&gt;_&lt;)」とか「Python3で始めたけどまだ3に移行できてなくて2の方がいいって聞いたけどどうなの？」みたいな人が安心してPython3でコードを書いていける手助けになればいいなぁ、くらいの内容です。 ちなみに私のPython経験は2011年ごろからpython2を少し使って、2013年くらい？から新しく書くものはpython3にしました …" />

        <meta property="og:site_name" content="Blank File" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Title"/>
        <meta property="og:url" content="/drafts/nopy2.html"/>
        <meta property="og:description" content="昨日「これからPython始めるプログラミング初心者はいいからPython3使っとけ」的なツイートをしたら思いの外伸びたので、Python2ではなくPython3をおすすめする理由を書いておきます。 この記事はこれからPythonを始めようとしている人、または始めたばかりの人を対象としています。 したがって、python2で書かれたコードをpython3で動くようにする方法とか、（この記事中で述べる）python2のクソ仕様の対処方法は書きません。 あくまで「Python始めたいけどバージョン二つあってどっち使えばいいかわかんない(&gt;_&lt;)」とか「Python3で始めたけどまだ3に移行できてなくて2の方がいいって聞いたけどどうなの？」みたいな人が安心してPython3でコードを書いていける手助けになればいいなぁ、くらいの内容です。 ちなみに私のPython経験は2011年ごろからpython2を少し使って、2013年くらい？から新しく書くものはpython3にしました …"/>
        <meta property="article:published_time" content="2016-03-05" />
            <meta property="article:section" content="Python" />
            <meta property="article:tag" content="python" />
            <meta property="article:author" content="miyakogi" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.ja.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/trac.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
Blank File            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/drafts/nopy2.html"
                       rel="bookmark"
                       title="Permalink to Title">
                        Title
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-03-05T16:13:00+09:00"> Sat 05 March 2016</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="/tag/python.html">python</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>昨日「これからPython始めるプログラミング初心者はいいからPython3使っとけ」的なツイートをしたら思いの外伸びたので、Python2ではなくPython3をおすすめする理由を書いておきます。</p>
<p>この記事はこれからPythonを始めようとしている人、または始めたばかりの人を対象としています。
したがって、python2で書かれたコードをpython3で動くようにする方法とか、（この記事中で述べる）python2のクソ仕様の対処方法は書きません。
あくまで「Python始めたいけどバージョン二つあってどっち使えばいいかわかんない(&gt;_&lt;)」とか「Python3で始めたけどまだ3に移行できてなくて2の方がいいって聞いたけどどうなの？」みたいな人が安心してPython3でコードを書いていける手助けになればいいなぁ、くらいの内容です。</p>
<p>ちなみに私のPython経験は2011年ごろからpython2を少し使って、2013年くらい？から新しく書くものはpython3にしました。
趣味+αで書いている程度のクソザコなのでやさしくお願いします・・・</p>
<h1>どちらのバージョンをインストールするべきか</h1>
<p>迷ったらとりあえず両方インストールしておけば問題ありません。
私が知る限り、Windows、Mac、大抵のLinuxは2と3の両方を同時にインストールし、独立して使うことができます。
他のOSを使ってる方はガチ勢だと思うので私なんかの意見は無視して下さい・・・</p>
<p>デフォルトの<code>python</code>コマンドでどちらが使われるかという問題はありますが、
コマンドで実行するときには<code>python2 ファイル名.py</code>または<code>python3 ファイル名.py</code>などとすれば好きなバージョンで実行できます。
（某OSだとできないかもしれないので、その場合は適当にショートカットかシンボリックリンクを用意する必要があります）
また、エクスプローラなどでダブルクリックした時にどちらのバージョンを使うか指定したい場合には、ファイルの最初の行に<code>#!/usr/bin/env python3</code>などと書いておけば大抵のOSではそこに書かれたバージョンで実行してくれます。
詳細は「シェバン（shebang）」や「マジックコメント」などで検索してください。
某OSではこれが無視されるかもしれませんが、そのOSはおそらくファイルの拡張子で実行するプログラムを設定できるはずなので、拡張子を<code>.py2</code>とか<code>.py3</code>にして関連付けしておけばいいんじゃないんでしょうか。</p>
<h1>Pythonの歴史</h1>
<p>| 1991年 | Python 0.9x 公開 |
| 1994年 | Python 1.0 公開 |
| 2000年 | Python 2.0 公開 |
| 2008年 | Python 3.0 公開 |
| 2010年 | Python 2.7 (2系最後のバージョン) 公開 |
| 2015年 | Python 3.5 (現在の最新バージョン) 公開 |
| 2020年 | Python 2.7 サポート終了(予定) |</p>
<p>Python2.7には今後機能追加は行われず、バグ修正や新しいOSのサポートだけが提供されます（<a href="http://docs.python.jp/2.7/whatsnew/2.7.html">Python 2.7.x ドキュメント</a>より）。</p>
<h1>Python3への移行状況はどうなっているのか</h1>
<p>Pythonの有名ライブラリでまだPython3対応していないものはほとんどありません。
ネットで調べると古いブログ記事などもひっかかるので、それらには「まだライブラリが3には対応していない」などと書かれていたりしますが、それはあくまで当時の状況であって、今の状況ではありません。
逆に最近公開されたライブラリはPython3だけをサポートしているものもあります。
例えばaiohttpというhttpサーバー（＋クライアント）はpython3.4以上だけをサポートしています。</p>
<p>実際の有名ライブラリのPython3対応状況は<a href="https://python3wos.appspot.com/">Python 3 Wall of Superpowers</a>で見ることができます。
ここではダウンロード数の多い順？にPython3の対応状況（対応済みは緑、未対応は赤）が確認できます。
まだ少し赤がありますが、それらが必要で、かつ代替手段がないものは限られるでしょう。
調べてみるとメンテされていなかったりします。</p>
<p>強いてあげればansible, fabricがまだ3系に対応していませんが、これはサーバーなどの設定を自動化するための「ツール（それ単独で完結するプログラム）」であり、numpyやscipy、djangoなどのように自分のコード内で利用するライブラリとは性質が異なります。
必要になったらPython2もインストールすればいいだけです。</p>
<p>一方、Pythonを使っている側の動きとしては、すでにいくつかのLinuxディストリビューション（ArchとFedora）でデフォルトでインストールされるPythonが3系になり、Ubuntuも今年4月リリース予定のバージョンから3系がデフォルトになります。FedoraはRHELやCentoOSの開発版的な立ち位置なので、Fedoraに続いてこれらのディストリビューションも3系がデフォルトになるでしょう。
Macはわかりません。</p>
<h2>でも「Python3への移行が進んでない」って聞いた、という人へ</h2>
<p>まず「移行」という言葉の意味するところを考えたほうがいいです。
それは「新しいバージョンが使えない」という意味でしょうか、それとも「古いバージョンを使ってるユーザーが一定数いる」という意味でしょうか。</p>
<p>Pythonのライブラリを書いている人が「python3への移行がなかなか進まない・・・」とグチっているときは「いまだにpython2で俺のライブラリ使ってるやつがいるせいでpython2のサポート切れなくてpython3の便利機能使えないじゃねーかクソが！」という意味の可能性があります。
例えばWeb系だと「Vistaからの移行がなかなか進まない・・・」と言った時には「VistaでIE9使ってるユーザーがまだいるせいでIE9のサポート切れないじゃねーかクソが！！！」という意味です。
古いバージョンを使っているユーザーがいるからと言って、これから新しくコードを書くあなたまで古いバージョンを使う必要はありません。</p>
<p>もしあなたがPython3で素晴らしいライブラリを書いて公開して、「Python2もサポートして！」と言われたらその時対応を考えれば大丈夫です。
ちなみに、これからPythonを使い始めて、一年後くらいにすごいライブラリを公開して、それが有名になるまで一年かかったとすると、その時すでに2018年です。
2系のサポート終了まで1~2年という計算になるので、「今さらサポートするわけねーだろ」とコメントして無視して問題ないと思います。</p>
<h1>Python2 と Python3 はどのくらい違うのか</h1>
<p>Python2 と Python3 に互換性がないのは事実です。
しかしその違いは小さく、新機能を使わないという前提であれば、一方のバージョンで書いて他方へ移植する時に修正が必要な箇所は数パーセント程度ではないかと思います（当然これは処理によって変わります）。
実際に多くのライブラリが2系と3系を同じコードでサポートしています。</p>
<h2>文字列のあつかい</h2>
<p>文字列は<code>'</code>または<code>"</code>で囲んで表します。
<code>'hello'</code>などです。
2でも3でも同じです。</p>
<h3>print</h3>
<p>Pythonでは画面に出力する命令・関数として<code>print</code>があります。
2系では文でしたが、3系では関数になりました。</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>  <span class="c1"># 2.7でも3でも hello と出力される</span>
<span class="k">print</span> <span class="s1">&#39;hello&#39;</span>   <span class="c1"># 3系ではエラーになる</span>
</pre></div>


<p>ネット上の古いコードで動かないものがあった場合、原因はまずこれです。
<code>print</code>の直後にカッコがついているか確認してください。
2.7でも3でも<code>print('hello')</code>は正常に動作するので、もし参照している本や記事が<code>print 何か</code>と書いていたらそれは古い情報だと思うべきです。</p>
<p>カッコで囲むのが面倒だと感じるかもしれませんが、最近のエディタであれば<code>(</code>を入力した時に自動的に<code>)</code>も入力するように設定できるはずなので、それほど影響はないはずです（そもそも普通の関数は全てカッコが必要です）。
そして、実際のコードでは最終的には<code>print</code>自体なくなっているはずです。
書いている最中のちょっとした確認で使うかもしれませんが、ログの出力をしたいのであれば<code>logging</code>モジュールを使うべきですし、確認もテストを書いて<code>assert</code>などを使ったほうが後々楽になります。</p>
<h3>日本語</h3>
<p>日本語であいさつを出力してみます。
適当なファイル（仮に<code>a.py</code>とします）に次のコードを保存して実行してみます。</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;こんにちは&#39;</span><span class="p">)</span>
</pre></div>


<p>3系ではもちろんこれで動きます。</p>
<p>2系では次のエラーになって動きませんでした。</p>
<p>厳しいですね。
対処法は</p>
<ol>
<li>ファイルの先頭でファイルの文字エンコーディングを正しく指定する</li>
<li><code>'こんにちは'</code>の前に<code>u</code>をつけて<code>print(u'こんにちは')</code>にする</li>
</ol>
<p>の両方が必要です。
どうしてもPython2が使いたい人は頑張って調べて下さい。</p>
<p>古い情報で文字列の前に<code>u</code>がついている時はこれの名残だと思って下さい。
3系では何の意味もありません。</p>
<h3>ファイルのあつかい</h3>
<p>ファイルを読んだり結果を書き込んだり、プログラミングをする上でファイル操作は避けて通れません。
先ほどのファイルをpythonで読み込んでそのまま表示してみましょう。</p>
<p>インタラクティブシェルを起動して</p>
<div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.py&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>


<h2>数値のあつかい</h2>
<p>プログラミング言語なのでもちろん四則演算はできます。
Pythonのインタラクティブシェルを電卓のように使ってみます。</p>
<h3>足し算</h3>
<p>大きな数の足し算をしてみましょう。</p>
<div class="highlight"><pre><span></span>9223372036854775807 + 1
</pre></div>


<p>上記の出力は、私の手元ではPython3.5.1と2.7.11でそれぞれ次のようになりました。</p>
<div class="highlight"><pre><span></span>9223372036854775808   # 3.5
9223372036854775808L  # 2.7 なんか最後にLついてる！
</pre></div>


<p>2.7は最後に変なLがついてしまいます。
足し算だけでなく、掛け算や引き算などでも一定の値以上/以下になるとLが表示されるようになります。</p>
<p>実害は（たぶん）ありませんが、ちょっと気持ち悪いですね。
（環境によってLがつく整数の大きさは異なります。<code>import sys</code>して<code>print(sys.maxint)</code>で調べることができます。）</p>
<h3>割り算</h3>
<p>1/2を計算してみます。</p>
<p>Python2では小数点以下が切り捨てられてしまいます。
Python3の結果の方が直感的ではないでしょうか。</p>
<h2>ループ</h2>
<p>プログラミングと言えばループ！
例えば0 ~ 9を順番に表示するコードは以下のようになります。</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>


<p>これを使って階乗を求める計算をしてみます。</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">*</span> <span class="n">i</span>
</pre></div>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/miyakogi"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                <li class="list-group-item"><a href="https://twitter.com/MiyakoDev"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
              </ul>
            </li>

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
                <ul class="list-group" id="recentposts">
                    <li class="list-group-item">
                        <a href="/20170731/m2r.html">
                            MarkdownとreStructuredTextを単一ファイルに混ぜ書きできるM2Rの紹介（Sphinx拡張対応）
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/20160502/wdom_theme_options.html">
                            WDOMのテーマ機能と起動オプションの紹介
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/20160429/gitlab-pages-ci.html">
                            GitLabでドキュメントのビルドとホスティング
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/20160406/wdom_intro.html">
                            PythonでブラウザベースのGUIアプリを作るライブラリ、WDOMの紹介
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/20160308/vimpack_py.html">
                            Vimのパッケージをインストール・アップデートしてヘルプ作るスクリプトを書きました
                        </a>
                    </li>
                </ul>
            </li>

            <li class="list-group-item"><a href="/"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categories</span></h4></a>
                <ul class="list-group" id="categories">
                    <li class="list-group-item">
                        <a href="/category/gitlab-ci.html">
                            <i class="fa fa-folder-open fa-lg"></i> GitLab CI
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/python.html">
                            <i class="fa fa-folder-open fa-lg"></i> Python
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/category/vim.html">
                            <i class="fa fa-folder-open fa-lg"></i> Vim
                        </a>
                    </li>
                </ul>
            </li>

            <li class="list-group-item"><a href="/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group " id="tags">
                    <li class="list-group-item tag-1">
                        <a href="/tag/vim.html">
                            vim
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="/tag/python.html">
                            python
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/static-site-generator.html">
                            static site generator
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/gitlab-mkdocs-ci.html">
                            gitlab mkdocs ci
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/ci.html">
                            CI
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/wdom.html">
                            wdom
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/rst.html">
                            rst
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/pelican.html">
                            pelican
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/markdown.html">
                            markdown
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/python-wdom.html">
                            python wdom
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="/tag/sphinx.html">
                            sphinx
                        </a>
                    </li>
                </ul>
            </li>


    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://python.org/" target="_blank">
                Python.org
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://getpelican.com/" target="_blank">
                Pelican
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 miyakogi
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>


</body>
</html>